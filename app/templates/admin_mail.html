{% extends "base.html" %}

{% block content %}
  <h2>Mail configuration</h2>
  <form method="post" action="{{ url_for('main.admin_mail_config') }}" class="row g-2 mb-4">
    <div class="col-6">
      <label class="form-label">SMTP server</label>
      <input name="smtp_server" value="{{ cfg.smtp_server if cfg else '' }}" class="form-control" placeholder="smtp.example.com">
    </div>
    <div class="col-2">
      <label class="form-label">Port</label>
      <input name="smtp_port" value="{{ cfg.smtp_port if cfg else 587 }}" class="form-control">
    </div>
    <div class="col-2 d-flex align-items-center">
      <label class="form-check-label me-2">Use TLS</label>
      <input type="checkbox" name="use_tls" {% if cfg and cfg.use_tls %}checked{% endif %}>
    </div>
    <div class="col-6">
      <label class="form-label">Username</label>
      <input name="username" value="{{ cfg.username if cfg else '' }}" class="form-control">
    </div>
    <div class="col-6">
      <label class="form-label">Password</label>
      <input name="password" type="password" value="" class="form-control" placeholder="leave blank to keep stored password">
    </div>
    <div class="col-6">
      <label class="form-label">From address</label>
      <input name="from_address" value="{{ cfg.from_address if cfg else '' }}" class="form-control" placeholder="no-reply@example.com">
    </div>
    <div class="col-12 mt-2">
      <button class="btn btn-primary">Save mail settings</button>
    </div>
  </form>

  <p class="text-muted">If mail is configured correctly, users will receive notifications when proposals change or new messages are posted.</p>
{% endblock %}
